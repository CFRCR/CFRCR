---
permalink: /search/
---
{%- comment %}Page HTML{% endcomment -%}
<div style="padding: 30px;">
  <form action="/search/">
    <input id="search-input" class="mdl-textfield__input" type="text" name="text" style="outline: none;">
  </form>
  <div id="hits"></div>
</div>

{%- comment %}Scripts for setting the search bar contents based on URL{% endcomment -%}
<script src="//cdn.jsdelivr.net/algoliasearch/3/algoliasearch.min.js"></script>
<script>
  //Gets variables from the URL
  function getURLParams() {
    var url = window.location.search;
    var queryStart = url.indexOf("?") + 1,
      queryEnd   = url.indexOf("#") + 1 || url.length + 1,
      query = url.slice(queryStart, queryEnd - 1),
      pairs = query.replace(/\+/g, " ").split("&"),
      parms = {}, i, n, v, nv;

    if (query === url || query === "") return;

    for (i = 0; i < pairs.length; i++) {
      nv = pairs[i].split("=", 2);
      n = decodeURIComponent(nv[0]);
      v = decodeURIComponent(nv[1]);

      if (!parms.hasOwnProperty(n)) parms[n] = [];
      parms[n].push(nv.length === 2 ? v : null);
    }
    return parms;
  }

  //Sets the textbox to the search input from the URL
  var input = getURLParams().text[0];
  document.getElementById("search-input").value = input;
</script>
{% comment %}Look at when these get run...{% endcomment %}
<script>
  var client = algoliasearch('XNTLRPVD7E', 'cce72459f9d0ffc19d08d7b1d82cc9f1');
  var index = client.initIndex('CFRCR');
  var params = { hitsPerPage: 20 };

  index.search(input, params)
  .then(function searchSuccess(content) {

    for (var i = 0; i < content.hits.length; ++i) {
      console.log(content.hits[i]);
      console.log(content.hits[i].title);
      document.getElementById("hits").innerHTML += "<a href=\"" + content.hits[i].url + "\">" + content.hits[i].title + "</a><br>";
    }

  })
  .catch(function searchFailure(err) {
    console.error(err);
  });
</script>